buildscript {
    repositories {
        jcenter()
        maven { url "https://jitpack.io" }
    }
    dependencies {
        classpath 'io.freefair.gradle-plugins:git-version:2.0.0-beta5'
    }
}

repositories {
    jcenter()
}

group = 'io.freefair'
apply plugin: 'io.freefair.git-version'

apply plugin: 'groovy'
apply plugin: 'maven'

sourceCompatibility = JavaVersion.VERSION_1_7

dependencies {
    compile gradleApi()
    compile localGroovy()
}

groovydoc {
    link('https://docs.gradle.org/current/groovydoc/', 'org.gradle.api', 'org.gradle.api.internal')
    link('https://docs.gradle.org/current/groovydoc/', 'org.gradle.api.plugins.quality', 'org.gradle.api.plugins.quality.internal')
}

task sourcesJar(type: Jar, dependsOn: classes) {
    from sourceSets.main.allSource
    classifier = "sources"
}

task groovydocJar(type: Jar, dependsOn: groovydoc) {
    from groovydoc.getDestinationDir()
    classifier = "groovydoc"
}

task javadocJar(type: Jar, dependsOn: groovydoc) {
    from groovydoc.getDestinationDir()
    classifier = "javadoc"
}

artifacts {
    archives sourcesJar
    archives javadocJar
    archives groovydocJar
}

